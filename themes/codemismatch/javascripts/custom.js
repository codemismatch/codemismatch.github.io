function navigateTo(e,t=!0){state.currentPage=e,t&&window.history.pushState({page:e},"",`#${e}`),document.querySelectorAll(".page-section").forEach(e=>e.classList.remove("active")),document.querySelectorAll(".nav-link").forEach(e=>{e.classList.remove("text-brand-600","font-bold")});const n=document.querySelector(`.nav-link[data-page="${e}"]`);n&&n.classList.add("text-brand-600","font-bold");if(({home:["section-hero","section-services","section-work"],services:["section-services"],work:["section-work"],contact:["section-contact"],architect:["section-architect"],open_source:["section-placeholder"],blog:["section-placeholder"]}[e]||[]).forEach(e=>document.getElementById(e)?.classList.add("active")),"open_source"===e){const e=document.getElementById("placeholder-title");e&&(e.innerText="Open Source Initiatives")}else if("blog"===e){const e=document.getElementById("placeholder-title");e&&(e.innerText="Engineering Blog")}"architect"===e&&setTimeout(()=>{const e=document.getElementById("chat-messages");e&&(e.scrollTop=e.scrollHeight)},100),window.scrollTo(0,0)}function toggleMobileMenu(){const e=document.getElementById("mobile-menu");e&&e.classList.toggle("hidden")}function toggleMobileProducts(){const e=document.getElementById("mobile-products-list"),t=document.getElementById("mobile-product-icon");e&&(e.classList.toggle("hidden"),t&&(t.style.transform=e.classList.contains("hidden")?"rotate(0deg)":"rotate(180deg)"))}function setTheme(e){state.currentTheme=e;const t=THEMES[e],n=document.documentElement;Object.entries(t.variables).forEach(([e,t])=>{n.style.setProperty(e,t)}),["void","azure","paper"].forEach(t=>{const n=document.getElementById(`btn-theme-${t}`);n&&(n.className=t===e?"w-full text-left px-3 py-2 rounded font-mono text-xs bg-brand-600 text-white":"w-full text-left px-3 py-2 rounded font-mono text-xs hover:bg-skin-surface-hover text-skin-text")})}function toggleThemePanel(){const e=document.getElementById("theme-panel");e&&e.classList.toggle("hidden")}function hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}function mixColors(e,t,n){return{r:Math.round(e.r*(1-n)+t.r*n),g:Math.round(e.g*(1-n)+t.g*n),b:Math.round(e.b*(1-n)+t.b*n)}}function generatePalette(e,t){const n=hexToRgb(e),o={r:255,g:255,b:255},a={r:0,g:0,b:0},r=(e,t)=>{const o=mixColors(e,n,t);return`${o.r} ${o.g} ${o.b}`},i={};return[.05,.1,.25,.45,.7,.85].forEach((e,n)=>{i[`--${t}-${[50,100,200,300,400,500][n]}`]=r(o,e)}),i[`--${t}-600`]=`${n.r} ${n.g} ${n.b}`,[.2,.35,.55,.75].forEach((e,n)=>{i[`--${t}-${[700,800,900,950][n]}`]=r(a,e)}),i}function updateBrandColor(e){state.brandColor=e;const t=document.getElementById("brand-color-picker"),n=document.getElementById("brand-color-label");t&&(t.value=e),n&&(n.innerText=e);const o=generatePalette(e,"brand");Object.entries(o).forEach(([e,t])=>document.documentElement.style.setProperty(e,t))}function updateAmbientColor(e){state.ambientColor=e;const t=document.getElementById("ambient-color-picker"),n=document.getElementById("ambient-color-label");t&&(t.value=e),n&&(n.innerText=e);const o=generatePalette(e,"ambient");Object.entries(o).forEach(([e,t])=>document.documentElement.style.setProperty(e,t))}function resetColors(){updateBrandColor("#00608a"),updateAmbientColor("#0f172a")}function setupWaveAnimation(){function e(){a=n.parentElement.offsetWidth,r=n.parentElement.offsetHeight,n.width=a*window.devicePixelRatio,n.height=r*window.devicePixelRatio,o.scale(window.devicePixelRatio,window.devicePixelRatio)}function t(){o.clearRect(0,0,a,r);const e=THEMES[state.currentTheme].isDark?.9:.6,n=r/2;[{timeModifier:1,lineWidth:2,amplitude:50,wavelength:200,gradient:[`rgba(59, 130, 246, ${e})`,`rgba(6, 182, 212, ${e})`,`rgba(168, 85, 247, ${e})`,`rgba(236, 72, 153, ${e})`]},{timeModifier:.5,lineWidth:1.5,amplitude:140,wavelength:300,gradient:[`rgba(30, 58, 138, ${.8*e})`,`rgba(37, 99, 235, ${.8*e})`,`rgba(79, 70, 229, ${.8*e})`]},{timeModifier:.7,lineWidth:1,amplitude:90,wavelength:240,gradient:[`rgba(88, 28, 135, ${.7*e})`,`rgba(124, 58, 237, ${.7*e})`,`rgba(30, 64, 175, ${.7*e})`]},{timeModifier:1.1,lineWidth:.5,amplitude:30,wavelength:120,gradient:[`rgba(59, 130, 246, ${.4*e})`,`rgba(147, 197, 253, ${.4*e})`]},{timeModifier:2,lineWidth:1,amplitude:-50,wavelength:15,gradient:[`rgba(59, 130, 246, ${e})`,`rgba(6, 182, 212, ${e})`]},{timeModifier:1,lineWidth:2,amplitude:-100,wavelength:30,gradient:[`rgba(30, 58, 138, ${.8*e})`,`rgba(37, 99, 235, ${.8*e})`]},{timeModifier:.5,lineWidth:1,amplitude:-200,wavelength:60,gradient:[`rgba(88, 28, 135, ${.7*e})`,`rgba(124, 58, 237, ${.7*e})`]},{timeModifier:.25,lineWidth:3,amplitude:-160,wavelength:40,gradient:[`rgba(59, 130, 246, ${.6*e})`,`rgba(147, 197, 253, ${.6*e})`]},{timeModifier:.35,lineWidth:2,amplitude:-240,wavelength:70,gradient:[`rgba(168, 85, 247, ${.5*e})`,`rgba(236, 72, 153, ${.5*e})`]}].forEach((e,t)=>{o.beginPath(),o.lineWidth=e.lineWidth;const r=o.createLinearGradient(0,0,a,0);e.gradient.forEach((t,n)=>r.addColorStop(n/(e.gradient.length-1),t)),o.strokeStyle=r;for(let r=0;r<a;r+=5){const a=2*Math.PI/e.wavelength,d=n+Math.sin(a*r+i*e.timeModifier)*e.amplitude*Math.sin(.2*i+t)+Math.cos(.01*r+i)*(.2*e.amplitude);0===r?o.moveTo(r,d):o.lineTo(r,d)}o.stroke()}),i+=.008,requestAnimationFrame(t)}const n=document.getElementById("wave-canvas");if(!n)return;const o=n.getContext("2d");let a,r;window.addEventListener("resize",e),e();let i=0;t()}function appendMessage(e,t){const n=document.getElementById("chat-messages");if(!n)return;const o="model"===e,a=document.createElement("div");a.className=`flex gap-4 ${o?"flex-row":"flex-row-reverse"} animate-fade-in`;const r=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>");a.innerHTML=`\n    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center border ${o?"border-brand-600 bg-brand-600/10 text-brand-600":"border-skin-border bg-skin-base text-skin-muted"}">\n      <i data-lucide="${o?"activity":"user"}" class="w-4 h-4"></i>\n    </div>\n    <div class="max-w-[85%] font-mono text-sm p-4 border shadow-sm ${o?"border-brand-600/30 bg-skin-base text-skin-text":"border-skin-border bg-skin-surface-hover text-skin-text"}">\n      ${r}\n    </div>\n  `,n.appendChild(a),"undefined"!=typeof lucide&&lucide.createIcons(),n.scrollTop=n.scrollHeight}function renderChat(){const e=document.getElementById("chat-messages");e&&(e.innerHTML="",state.messages.forEach(e=>appendMessage(e.role,e.text)))}async function handleChatSend(){const e=document.getElementById("chat-input");if(!e)return;const t=e.value.trim();if(!t)return;state.messages.push({id:Date.now(),role:"user",text:t}),appendMessage("user",t),e.value="";const n=document.getElementById("chat-loading");n&&n.classList.remove("hidden");try{const e="The Architect is currently offline. API integration required.";state.messages.push({id:Date.now()+1,role:"model",text:e}),appendMessage("model",e)}catch(e){console.error(e),appendMessage("model","Error: Signal lost.")}finally{n&&n.classList.add("hidden")}}let state={currentPage:"home",currentTheme:"azure",brandColor:"#00608a",ambientColor:"#0f172a",messages:[{id:"init",role:"model",text:"I am The Architect. I serve as the cognitive interface for CodeMismatch. How may I assist with your enterprise strategy?"}]};const THEMES={void:{variables:{"--bg-base":"#020408","--bg-surface":"#0f1419","--bg-surface-hover":"#1a202c","--text-main":"#f8fafc","--text-muted":"#9ca3af","--border-color":"#1a202c","--card-border":"#1a202c"},isDark:!0},azure:{variables:{"--bg-base":"#f8fafc","--bg-surface":"#ffffff","--bg-surface-hover":"#f1f5f9","--text-main":"#0f172a","--text-muted":"#64748b","--border-color":"#e2e8f0","--card-border":"#e2e8f0"},isDark:!1},paper:{variables:{"--bg-base":"#fafafa","--bg-surface":"#ffffff","--bg-surface-hover":"#f1f5f9","--text-main":"#0f172a","--text-muted":"#64748b","--border-color":"#cbd5e1","--card-border":"#e2e8f0"},isDark:!1}};document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof lucide&&lucide.createIcons(),setTheme(state.currentTheme),resetColors(),setupWaveAnimation();navigateTo(window.location.hash.slice(1)||"home",!1),renderChat();const e=document.getElementById("brand-color-picker"),t=document.getElementById("ambient-color-picker"),n=document.getElementById("chat-input");e&&e.addEventListener("input",e=>updateBrandColor(e.target.value)),t&&t.addEventListener("input",e=>updateAmbientColor(e.target.value)),n&&n.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleChatSend())}),window.addEventListener("popstate",e=>{e.state&&e.state.page&&navigateTo(e.state.page,!1)})}),window.navigateTo=navigateTo,window.toggleMobileMenu=toggleMobileMenu,window.toggleMobileProducts=toggleMobileProducts,window.setTheme=setTheme,window.toggleThemePanel=toggleThemePanel,window.updateBrandColor=updateBrandColor,window.updateAmbientColor=updateAmbientColor,window.resetColors=resetColors,window.handleChatSend=handleChatSend;